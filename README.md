# AstrBot 插件：文字修仙

**版本:** 2.4.0

一款为 AstrBot 设计的、功能丰富的放置类修仙游戏插件。让你在聊天群中体验从凡人到大能的修行之路，工作摸鱼、畅聊吹水的同时亦可得道飞升！

1，原作者非常感谢 [@Zhalslar](https://github.com/Zhalslar) 提供的模块化思路，十分清晰的重构了整个插件的结构。
2，本插件基于原作者 [oldPeter616](https://github.com/oldPeter616) 的修仙插件进行进一步更新，非常抱歉没有联系作者就进行二创更新，如果原作者看到了，请在github上留言联系我。

## v2.4.0 更新

1.  **突破丹药系统**: 全新的突破辅助机制，让突破更加可控！
    * 新增7种突破类丹药（三品筑基丹、四品破境丹、五品渡劫丹等），可提升10%-50%突破成功率
    * 突破丹药为一次性消耗品，使用后下次突破时生效（无论成功失败都会消耗）
    * 突破丹药价格为同品质普通丹药的3倍以上，珍贵稀有
    * 玩家信息中可查看当前激活的突破加成buff状态
2.  **全新属性系统**: 修士不再只有攻防，现在拥有更丰富的属性维度！
    * 新增三大核心属性：**灵力**（法术威能）、**精神力**（神识强度）、**气血**（生命力量）
    * 所有属性会随境界突破自动提升，每个境界都有专属的属性成长曲线
    * 高品质丹药可永久提升这些属性，珍品丹药小幅提升，圣品大幅提升，帝品专注单一属性极致提升
3.  **丹药系统大扩展**: 丹药种类从10种扩充至30种（1-9品完整体系）
    * **凡品（1-2品）**: 基础恢复类，适合炼气期修士
    * **珍品（3-4品）**: 多重效果，适合筑基、金丹期修士
    * **圣品（5-6品）**: 大幅提升属性，适合元婴、化神期修士
    * **帝品（7-8品）**: 专注极致提升单一属性，适合炼虚、合体期修士
    * **神品（9品）**: 全方位极致提升，适合渡劫期及飞升大能
4.  **境界体系优化**: 更新为更贴合传统修仙的30层境界命名
    * 炼气期（一至九层）→ 筑基期（初期/中期/后期）→ 金丹期 → 元婴期 → 化神期 → 炼虚期 → 合体期 → 大乘期 → 渡劫期 → 混元大罗金仙
    * 每个境界都配置了专属的属性成长数值

## 插件特色

* **完整的成长体验**: 从创建角色、闭关修炼，到突破境界，体验完整的修仙成长路线（30层境界）。
* **突破辅助系统**: 7种突破丹药可提升10%-50%成功率，让突破更加可控。
* **多维属性系统**: 气血、攻击、防御、灵力、精神力五大属性，随境界提升自动成长。
* **钱庄理财系统**: 定期存款、活期存款、转账功能，让灵石也能生钱。
* **道号身份系统**: 设置专属道号，全服唯一，彰显修仙身份。
* **丰富的灵根系统**: 17种不同灵根类型，从废灵根到先天道体，各具特色。
* **动态生成的无尽挑战**: 基于强大的标签系统，怪物和秘境可以被动态生成，每一次的战斗和探索都独一无二。
* **深度的经济与物品系统**: 拥有超过30种丹药（1-9品完整体系），坊市拥有真实库存，通过购买丹药、材料，管理个人背包。
* **40+世界Boss**: 多样化的Boss，24小时冷却重生机制，Boss实力随玩家群体成长。
* **丰富的社交互动**: 创建或加入宗门，与其他道友共谋发展，不再是孤独的散修。
* **高度自由配置**: 插件的核心指令、数值、游戏规则、物品、怪物、Boss乃至其特性标签，均可通过 `.json` 文件进行修改，方便服主打造专属服务器生态。
* **规范化数据管理**: 玩家数据使用 aiosqlite 独立存储，并包含专业的数据库迁移系统，保证了数据的安全、隔离与长期演进能力。

## 快速开始

*(确保你的 AstrBot 实例已正确加载此插件)*

1.  **开启你的修仙之路**: 在任意聊天窗口（QQ群或私聊），发送：
    `我要修仙`

2.  **获取帮助**:
    发送 `修仙帮助` 查看所有可用的游戏指令。

## 游戏指令

### 基础修炼
| 功能 | 指令 (示例) | 说明 |
| :--- | :--- | :--- |
| **开启仙途** | `我要修仙` | 创建你的专属修仙角色，每个ID仅可创建一次。 |
| **查看信息** | `我的信息` | 查看你当前的境界、灵根、修为、灵石和宗门等详细信息。 |
| **设置道号** | `道号 青云子` | 设置你的专属道号（2-20字，全服唯一）。 |
| **每日签到** | `签到` | 每日可进行一次签到，以获取随机的灵石奖励。 |
| **闭关修炼** | `闭关` | 进入修炼状态，持续获得修为。 |
| **结束修炼** | `出关` | 结束闭关状态，并结算本次修炼获得的修为。 |
| **重入仙途** | `重入仙途` | 花费灵石重新获得灵根。 |
| **境界突破** | `突破` | 当修为足够时，尝试突破到下一境界，有失败风险。 |

### 坊市交易
| 功能 | 指令 (示例) | 说明 |
| :--- | :--- | :--- |
| **查看坊市** | `商店` | 查看坊市当天随机上架的商品和库存。 |
| **查看背包** | `我的背包` | 查看你拥有的所有物品和数量。 |
| **购买物品** | `购买 引气丹 10` | 从坊市购买指定名称和数量的物品。 |
| **使用/装备** | `使用 引气丹` / `使用 青锋剑` | 使用背包中的丹药等消耗品，或穿戴法器。 |
| **查看装备** | `我的装备` | 查看当前已穿戴的所有装备及其属性。 |
| **卸下装备** | `卸下 武器` | 卸下指定部位的装备（武器/防具/饰品）。 |

### 钱庄理财
| 功能 | 指令 (示例) | 说明 |
| :--- | :--- | :--- |
| **查看钱庄** | `钱庄` | 查看钱庄信息和你的所有存款。 |
| **定期存款** | `定期存款 1000 24` | 存入定期（金额 小时数），最少24小时。 |
| **活期存款** | `活期存款 1000` | 存入活期，1小时后可取。 |
| **取定期** | `取款 定期` | 取出所有到期的定期存款。 |
| **取活期** | `取款 活期 500` | 取出指定金额的活期存款。 |
| **转账** | `转账 100 @某人` | 向其他玩家转账灵石。 |

### 战斗挑战
| 功能 | 指令 (示例) | 说明 |
| :--- | :--- | :--- |
| **查看Boss** | `查看世界boss` | 查看所有世界Boss状态（可战斗/冷却中）。 |
| **讨伐Boss** | `讨伐boss <ID>` | 挑战指定ID的世界Boss（24小时冷却）。 |
| **PVP切磋** | `切磋 @某人` | 与服务器内的其他道友进行友好的切磋比试。 |
| **探索秘境** | `探索秘境` | 探索根据自身修为动态生成的随机秘境副本。 |
| **秘境前进** | `前进` | 在秘境中前进到下一层。 |
| **离开秘境** | `离开秘境` | 主动离开当前秘境。 |

### 宗门社交
| 功能 | 指令 (示例) | 说明 |
| :--- | :--- | :--- |
| **创建宗门** | `创建宗门 青云门` | 创建你的宗门。 |
| **加入宗门** | `加入宗门 青云门` | 加入指定宗门。 |
| **查看宗门** | `我的宗门` | 查看当前宗门信息。 |
| **退出宗门** | `退出宗门` | 退出当前宗门。 |

### 其他
| 功能 | 指令 (示例) | 说明 |
| :--- | :--- | :--- |
| **获取帮助** | `修仙帮助` | 显示完整指令列表。 |

## 配置文件说明

本插件所有配置均在插件目录下的 `.json` 文件中，无需改动代码。

* **`_conf_schema.json`**: 插件主配置文件。包含访问控制、数值配置、文件路径等核心设置。
    * `ACCESS_CONTROL.WHITELIST_GROUPS`: 群聊白名单配置，留空表示所有群聊都可用。
    * `VALUES.SHOP_DAILY_ITEM_COUNT`: 每日坊市随机上架的商品种类数量。
    * `VALUES.BANK_FIXED_RATE_PER_HOUR`: 定期存款每小时利率倍数（默认1.003）。
    * `VALUES.BANK_CURRENT_RATE_PER_HOUR`: 活期存款每小时利率倍数（默认1.001）。
    * `SPIRIT_ROOT_SPEEDS`: 各种灵根的修炼速度倍率配置。
    * `SPIRIT_ROOT_WEIGHTS`: 各种灵根的抽取权重配置。
    * `REALM_RULES.REALM_BOSS_SCALING_FACTOR`: 秘境最终Boss的强度缩放系数（例如0.7代表70%强度）。
* **`tags.json`**: 怪物标签系统。定义了所有怪物特性的基础模板，如属性、掉落物、名称前后缀等，是动态内容生成的核心。现已支持17种标签（含雷、土、风、混沌等）。
* **`level_config.json`**: 境界配置文件。定义了所有境界的名称、升级所需修为、突破成功率，以及每个境界的基础属性（气血、攻击、防御、灵力、精神力）。
* **`items.json`**: 物品配置文件。定义了所有物品的名称、描述、价格和使用效果。包含30种丹药（1-9品），其中突破类丹药可提升突破成功率。**法器类物品需配置 `subtype` 和 `equip_effects` 字段**。
* **`monsters.json` / `bosses.json`**: 怪物与Boss配置文件。仅需定义基础模板和需要附加的标签，具体数值由生成器动态创建。现已内置40个世界Boss。

### 白名单配置示例

如果您希望插件只在特定群聊中生效，可以在AstrBot的插件配置界面中配置白名单：

1.  进入插件配置页面
2.  找到"访问控制"配置项
3.  在"白名单群号列表"中添加允许使用的QQ群号
4.  留空则表示所有群聊都可用

## 后续更新

本插件未来计划加入更多有趣的系统，例如：

* **炼器系统**: 引入装备合成与强化系统。
* **宗门扩展**: 增加宗门任务、宗门仓库、宗门贡献度等玩法。
* **管理员工具**: 提供更便捷的方式修改游戏数据。
* **娱乐玩法**：内置简单的小游戏消费灵石。
* **排行榜系统**：展示各项数据的排行榜。

## 贡献

欢迎通过提 Issue 或 Pull Request 的方式贡献代码、报告 Bug 或提出宝贵的建议。

## 许可证

本插件采用 AGPL-3.0 许可证。